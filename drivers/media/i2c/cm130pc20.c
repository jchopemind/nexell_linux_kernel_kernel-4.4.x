/*
 * Samsung Sensor Driver
 *
 * Copyright (c) 2018 Samsung Electronics Co., Ltd
 * Author: Sooman Jeong <sm5.jeong@samsung.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */

#include <linux/i2c.h>
#include <linux/delay.h>
#include <linux/module.h>
#include <linux/moduleparam.h>
#include <linux/vmalloc.h>
#include <linux/platform_device.h>
#include <media/v4l2-ctrls.h>
#include <media/v4l2-device.h>
#include <linux/gpio/consumer.h>
#include <linux/gpio.h>
#include "cm130pc20.h"

#define SENSOR_NAME "CM130"
//#define CONFIG_VGA_VIDEO_TYPE_OF_CM130PC20
//#define CONFIG_TYPE_OF_656
// Debug
static int debug = 0;
#define dprintk(msg...)	if(debug)	{printk("cm130pc20> " msg);}

enum {
	INTERVAL_MIN = 0,
	INTERVAL_MAX,
	INTERVAL,
};

struct nx_resolution {
	uint32_t width;
	uint32_t height;
	uint32_t interval[INTERVAL];
};

static struct nx_resolution supported_resolutions[] = {
	{
		.width	= 1280,
		.height = 720,
		.interval[INTERVAL_MIN] = 15,
		.interval[INTERVAL_MAX] = 30,
	}
};

#if defined(CONFIG_VGA_VIDEO_TYPE_OF_CM130PC20)
struct capture_size sensor_sizes_cm130pc20[] = {
	{  640,  480 },	/* VGA */
	{  320,  240 },	/* QVGA */
	{  176,  144 },	/* QCIF */
};
#else
struct capture_size sensor_sizes_cm130pc20[] = {
	{  1280,  720 },	/* HD */
	{   640,  480 },	/* VGA */
	{   320,  240 },	/* QVGA */
	{   176,  144 },	/* QCIF */
};
#endif
#if defined(CONFIG_VGA_VIDEO_TYPE_OF_CM130PC20)
struct capture_size sensor_sizes[] = {
	{  640,  480 },	/* VGA */
	{  320,  240 },	/* QVGA */
	{  176,  144 },	/* QCIF */
};
#else
struct capture_size sensor_sizes[] = {
	{  1280,  720 },	/* HD */
	{   640,  480 },	/* VGA */
	{   320,  240 },	/* QVGA */
	{   176,  144 },	/* QCIF */
};
#endif
#if 1
static struct sensor_reg sensor_initialize_cm130pc20[] = {
  {0x01, 0xf1},//sleep on
  {0x08, 0x0f},//Hi-Z on
  {0x01, 0xf0},//sleep off
  {0x03, 0x00},//Dummy 750us
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x0e, 0x05},//PLL X 3.0
  {0x0e, 0x75},//PLL X 3.0 enable
  {0x03, 0x00},//Dummy 750us
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x0e, 0x00},//PLL off
  {0x01, 0xf1},//sleep on
  {0x08, 0x00},//Hi-Z off
  {0x01, 0xf1},//sleep
  {0x01, 0xf3},//s/w reset  
  {0x01, 0xf1},//sleep
  //PAGE20
  {0x03, 0x20},
  {0x10, 0x0c},//ae off  (0x0c:60Hz   0x1c:50Hz)
  {0x03, 0x22},//page 22
  {0x10, 0x6b},//awb off 
  //PAGE0
  {0x03, 0x00},
// Vsync type2
  /* {0x10, 0x0c},//Vsync2 | Normal full size [0x0c]   Preview 640*480 [0x1d] */
  {0x10, 0x00},//Vsync2 | Normal full size [0x0c]   Preview 640*480 [0x1d]
  /* {0x11, 0x13},//xy flip : bit[7] 미사용해야 함 */
  {0x11, 0x17},//xy flip : bit[7] 미사용해야 함
  {0x12, 0x14},//Sync type default:0x00 //Sync type default:0x00 PCLK[2] 0 falling, 1 rising
//  {0x12, 0x00},//Sync type default:0x00 //Sync type default:0x00 PCLK[2] 0 falling, 1 rising
//  {0x12, 0x24},//Hsync:High atcive, Vsync:Low active, PCLK[2] 0 falling, 1 rising
//  {0x12, 0x04},//Hsync:High atcive, Vsync:High active, PCLK[2] 0 falling, 1 rising
/*
// Vsync type1
  {0x10, 0x04},//Vsync1 | Normal full size [0x0c]   Preview 640*480 [0x1d]
  {0x11, 0x13},//xy flip : bit[7] 미사용해야 함
  {0x12, 0x14},//Sync type default:0x00 //Sync type default:0x00 PCLK[2] 0 falling, 1 rising
//  {0x12, 0x04},//Hsync:High atcive, Vsync:Low active, PCLK[2] 0 falling, 1 rising
//  {0x12, 0x24},//Hsync:High atcive, Vsync:High active, PCLK[2] 0 falling, 1 rising
//  {0x12, 0x34},//Hsync:low atcive, Vsync:High active, PCLK[2] 0 falling, 1 rising -> rising edge
//  {0x12, 0x20},//Hsync:High atcive, Vsync:High active, PCLK[2] 0 falling, 1 rising -> rising edge
*/
  {0x13, 0x80},//Bayer windowing enable 110407
  {0x03, 0x00},//ESD
  {0x0b, 0xaa},
  {0x0c, 0x55},
  {0x0d, 0xaa},
  //windowing 1280*960
  {0x20, 0x00},//row start H
  {0x21, 0x2a},//row start L 0x2a(42)
  {0x22, 0x00},//col start H
  {0x23, 0x0c},//col start L 0x0c(12)
  {0x24, 0x03},//win height H
  {0x25, 0xc0},//win height L 0x3c0(960)
  {0x26, 0x05},//win width H
  {0x27, 0x00},//win width L  0x500(1280)
  {0x28, 0x02},
  {0x29, 0x13},//Preview1 mode row start
  {0x30, 0x00},//bayer row start h
  {0x31, 0xac},//bayer row start l 0xac=430
  {0x32, 0x03},//bayer row stop h  36e
  {0x33, 0x90},//bayer row stop l
  {0x34, 0x02},//bayer row height h
  {0x35, 0xe7},//bayer row height h
  {0x38, 0x02},//pre3 row start
  {0x39, 0x0a},//pre3 col start
  {0x3a, 0x01},//pre3 height_h
  {0x3b, 0x55},//pre3 height_l
  {0x3c, 0x05},//pre3 width_h
  {0x3d, 0x00},//pre3 width_l
  {0x40, 0x01},//Hblank 280 Oneline 1600
  {0x41, 0x18},
  {0x42, 0x00},//vblank 4
  {0x43, 0x04},
  {0x45, 0x04},//Pre1mode Camif Add modify
  {0x46, 0x28},//Pre1mode Camif Add modify
  {0x47, 0xc8},//Pre1mode Camif Add modify
  //BLC
  {0x80, 0x08},//100825 bit[6] adeptive blc   bit[3] BLC on/off
  {0x81, 0x97},//100825
  {0x82, 0x90},//100825
  {0x83, 0x30},//100825
  {0x84, 0xcc},//100825  
  {0x85, 0x00},//100825
  {0x86, 0xd4},//100825
  {0x88, 0x98},//120127
  //PAGE 0
  {0x03, 0x00},
  {0x90, 0x0f},//blc_time_th_on
  {0x91, 0x0f},//blc_time_th_off 
  {0x92, 0x9c},//blc_ag_th_on
  {0x93, 0x94},//blc_ag_th_off
  {0x94, 0x95},//091202
  {0x95, 0x90},//091202 
  {0x98, 0x38},//100825
  //Dark BLC
  {0xa0, 0x01},//20100309  Blue sign[6] offset[5:0]
  {0xa2, 0x01},//20100309  Gb
  {0xa4, 0x01},//20100309  Red
  {0xa6, 0x01},//20100309  Gr
  //Normal BLC
  {0xa8, 0x41},//Blue
  {0xaa, 0x41},//Gb
  {0xac, 0x41},//Red
  {0xae, 0x41},//Gr
  //Out  BLC
  {0x99, 0x43},//Red
  {0x9a, 0x43},//Gr
  {0x9b, 0x43},//Gb
  {0x9c, 0x43},//Blue
  //PAGE2
  {0x03, 0x02},
  {0x18, 0x4c},//10825  0x2c->0x4c
  {0x19, 0x00},//10825 0x00 :: pclk delay 0x00->0xc0
  {0x1a, 0x39},//10825 
  {0x1c, 0x3c},//10825	
  {0x1d, 0x01},//10825	
  {0x1e, 0x30},//10825
  {0x1f, 0x10},//10825
  {0x20, 0x77},//10825
  {0x21, 0xed},//10825  adc bias incresment
  {0x22, 0xa7},//10825 
  {0x23, 0x30},//10825 0x32->0x30 sunspot anhyunjoo  
  {0x24, 0x47},//10825
  {0x27, 0x34},//10825
  {0x2b, 0x80},//10825
  {0x2e, 0x11},//10825
  {0x2f, 0xa1},//10825
  {0x30, 0x00},//10825
  {0x31, 0x99},//10825
  {0x32, 0x00},//10825
  {0x33, 0x00},//10825
  {0x34, 0x22},//10825
  {0x36, 0x01},//10825 preview2 mode support
  {0x37, 0x01},//10825 preview2 mode support
  {0x3d, 0x03},//10825
  {0x3e, 0x0d},//10825 preview2 mode support 0xb->0xd 
  {0x49, 0xd1},//10825
  {0x50, 0x28},//10825
  {0x52, 0x01},//10825 horizon line noise
  {0x53, 0x81},//10825 preview2 mode suppot
  {0x54, 0x3c},//10825
  {0x55, 0x1c},//10825
  {0x56, 0x11},//10825
  {0x5d, 0xa2},//10825
  {0x5e, 0x5a},//10825
  {0x60, 0x6c},//10825
  {0x61, 0x77},
  {0x62, 0x6c},
  {0x63, 0x75},
  {0x64, 0x6c},
  {0x65, 0x75},
  {0x67, 0x0c},
  {0x68, 0x0c},
  {0x69, 0x0c},
  {0x72, 0x6d},
  {0x73, 0x74},
  {0x74, 0x6d},
  {0x75, 0x74},
  {0x76, 0x6d},
  {0x77, 0x74},
  {0x7c, 0x6b},
  {0x7d, 0x84},
  {0x80, 0x01},
  {0x81, 0x64},
  {0x82, 0x1e},
  {0x83, 0x2c},
  {0x84, 0x63},
  {0x85, 0x65},
  {0x86, 0x63},
  {0x87, 0x65},
  {0x92, 0x41},
  {0x93, 0x4e},
  {0x94, 0x63},
  {0x95, 0x65},
  {0x96, 0x63},
  {0x97, 0x65},
  {0xa0, 0x02},
  {0xa1, 0x61},
  {0xa2, 0x02},
  {0xa3, 0x61},
  {0xa4, 0x61},
  {0xa5, 0x02},
  {0xa6, 0x61},
  {0xa7, 0x02},
  {0xa8, 0x6c},
  {0xa9, 0x70},
  {0xaa, 0x6c},
  {0xab, 0x70},
  {0xac, 0x1c},
  {0xad, 0x22},
  {0xae, 0x1c},
  {0xaf, 0x22},
  {0xb0, 0x77},
  {0xb1, 0x80},
  {0xb2, 0x77},
  {0xb3, 0x80},
  {0xb4, 0x78},
  {0xb5, 0x7f},
  {0xb6, 0x78},
  {0xb7, 0x7f},
  {0xb8, 0x78},
  {0xb9, 0x7e},
  {0xba, 0x78},
  {0xbb, 0x7e},
  {0xbc, 0x79},
  {0xbd, 0x7d},
  {0xbe, 0x79},
  {0xbf, 0x7d},
  {0xc4, 0x2e},
  {0xc5, 0x3f},
  {0xc6, 0x50},
  {0xc7, 0x60},
  {0xc8, 0x2f},
  {0xc9, 0x3e},
  {0xca, 0x2f},
  {0xcb, 0x3e},
  {0xcc, 0x51},
  {0xcd, 0x5f},
  {0xce, 0x51},
  {0xcf, 0x5f},
  {0xd0, 0x0a},
  {0xd1, 0x09},
  {0xd2, 0x20},
  {0xd3, 0x00},
  {0xd4, 0x0f},//dcdc_time_th_on
  {0xd5, 0x0f},//dcdc_time_th_off
  {0xd6, 0x9c},//dcdc_ag_th_on
  {0xd7, 0x94},//dcdc_ag_th_off
  {0xe0, 0xe1},
  {0xe1, 0xe1},
  {0xe2, 0xe1},
  {0xe3, 0xe1},
  {0xe4, 0xe1},
  {0xe5, 0x01},
  {0xe9, 0x00},//2010.8.25  preview2 mode support
  {0xea, 0x64},//2010.8.25
  // PAGE 10
  {0x03, 0x10},
  {0x10, 0x01},//Ycbcr422_bit Order: YUYV
  {0x12, 0x10},//y offset[4], dif_offset[5] 
  {0x13, 0x02},//contrast effet enable : 0x02
  {0x30, 0x3f},//gate clock option 
  {0x34, 0x00},//hidden 10->00 100209
  {0x37, 0x01},//yc2d power save
  {0x3f, 0x04},//100825 
  {0x40, 0x80},//Y offset
  {0x48, 0x80},//Contrast (Y = constrast * (Y - 128) + 128)//86
  {0x53, 0x00},//dif_offset option
  {0x55, 0x30},//dif_offset option  diff_offset max
  {0x60, 0x83},//out color sat en[7] | auto color decrement en[1] | manual color sat en[0]
  {0x61, 0x00},//sat ctrl2
  {0x62, 0xb0},//blue saturation_C0
  {0x63, 0xb0},//red saturation_B0
  {0x64, 0xff},//auto decresment on AG th
  {0x65, 0xff},//auto decresment on DG th
  {0x66, 0xe4},//Outdoor saturation step 137fps apply out th
  {0x67, 0x42},//Outdoor saturation B/R
  // PAGE 11  D_LPF, Etc..
  {0x03, 0x11},
  {0x10, 0x3f},//B[6]:Blue En  Dlpf on[4:0] Sky over off : 0x7f->3f 
  {0x11, 0x20},//Uniform Full GbGr/OV-Nr
  {0x12, 0x80},//Blue MaxOpt  blue sky max filter optoin rate : 0 0xc0->80
  {0x13, 0xb8},//dark2[7] | dark2 maxfilter ratio[6:4] | dark3[3] | dark3 maxfilter ratio[2:0] 
  {0x30, 0xba},//Outdoor2 H th
  {0x31, 0x10},//Outdoor2 L th
  {0x32, 0x40},//Outdoor2 gain ratio
  {0x33, 0x1a},//Outdoor2 H lum
  {0x34, 0x15},//Outdoor2 M lum
  {0x35, 0x1d},//Outdoor2 L lum
  {0x36, 0xb0},//Outdoor1 H th
  {0x37, 0x18},//Outdoor1 L th
  {0x38, 0x40},//Outdoor1 gain ratio  0x80->40 
  {0x39, 0x1a},//Outdoor1 H lum       0x28->1e
  {0x3a, 0x15},//Outdoor1 M lum       0x10->15
  {0x3b, 0x1d},//Outdoor1 L lum       0x08->20
  {0x3c, 0x3f},//indoor H th//4a
  {0x3d, 0x16},//indoor L th
  {0x3e, 0x50},//indoor gain ratio    0x44  6a //44
  {0x3f, 0x14},//indoor H lum         0x12  18	
  {0x40, 0x17},//indoor M lum	       0x18  1c
  {0x41, 0x18},//indoor L lum         0x18  3e
  {0x42, 0x98},//dark1 H th
  {0x43, 0x28},//dark1 L th
  {0x44, 0x65},//dark1 gain ratio
  {0x45, 0x16},//dark1 H lum         0x38->0x28  
  {0x46, 0x30},//dark1 M lum         0x27->0x17
  {0x47, 0x34},//dark1 L lum         0x20->0x1a 
  {0x48, 0x90},//dark2 H th
  {0x49, 0x2a},//dark2 L th
  {0x4a, 0x65},//dark2 gain ratio
  {0x4b, 0x18},//dark2 H lum 
  {0x4c, 0x31},//dark2 M lum
  {0x4d, 0x36},//dark2 L lum 
  {0x4e, 0x80},//dark3 H th
  {0x4f, 0x30},//dark3 L th
  {0x50, 0x65},//dark3 gain ratio
  {0x51, 0x19},//dark3 H lum	
  {0x52, 0x31},//dark3 M lum 
  {0x53, 0x36},//dark3 L lum 
  {0x5a, 0x3f},//blue sky mode out1/2 enable  0x27->3f 
  {0x5b, 0x00},//Impulse pixel enable dark123 preview 0x3f capture 0x00
  {0x5c, 0x9f},//Indoor maxfilter rate[7:5] | Uncertain onoff[4:0] 0x1f ->0x9f
  {0x60, 0x3f},//GbGr all enable 
  {0x62, 0x0f},//GbGr offset
  {0x63, 0x25},//GbGr max
  {0x64, 0x10},//GbGr min
  {0x65, 0x0c},//Outdoor GbGr rate H 100% M 25% L 100%
  {0x66, 0x0c},//Indoor GbGr  rate H 100% M 25% L 100%
  {0x67, 0x00},//dark GbGr    rate H/M/L  100%
  {0x70, 0x0c},//Abberation On/Off B[1]: Outdoor B[0]: Indoor 07>>c
  {0x75, 0xa0},//Outdoor2 Abberation Luminance lvl 
  {0x7d, 0xb4},//Indoor Abberation Luminance   lvl
  {0x96, 0x08},//indoor/Dark1 edgeoffset1
  {0x97, 0x14},//indoor/Dark1 center G value
  {0x98, 0xf5},//slope indoor :: left/right graph polarity, slope
  {0x99, 0x2a},//indoor uncertain ratio control
  {0x9a, 0x20},//Edgeoffset_dark
  // PAGE 12  YC_LPF
  {0x03, 0x12},
  {0x20, 0x16},//Yc2d ctrl1 Preview Yc2d    off[0x16] on[0x17]
  {0x21, 0x0e},//Yc2d ctrl2 Preview Cfilter off[0x0e] on[0x0f]
  {0x22, 0x06},//Yc2d ctrl3 C filter mask outdoor1 | Indoor
  {0x23, 0x00},
  {0x24, 0x59},
  {0x25, 0x00},//2010.8.25 bit[5] off -> sharpness pre block off
  {0x2a, 0x01},
  {0x2e, 0x00},//2010.8.25
  //region th
  {0x30, 0x35},//Texture region(most detail)
  {0x31, 0xa0},//STD uniform1 most blur region
  {0x32, 0xb0},//STD uniform2      2nd blur
  {0x33, 0xc0},//STD uniform3      3rd blur
  {0x34, 0xd0},//STD normal noise1 4th blur
  {0x35, 0xe0},//STD normal noise2 5th blur
  {0x36, 0xff},//STD normal noise3 6th blur
  //add for reducing the color bluring
  {0x3b, 0x06},
  {0x3c, 0x06},
  {0x40, 0x83},//Outdoor2 H th
  {0x41, 0x20},//Outdoor2 L th		
  {0x42, 0x0a},//Outdoor2 H luminance 
  {0x43, 0x13},//Outdoor2 M luminance 
  {0x44, 0x10},//Outdoor2 l luminance 
  {0x45, 0x40},//Outdoor2 ratio
  {0x46, 0x83},//Outdoor1 H th
  {0x47, 0x20},//Outdoor1 L th	
  {0x48, 0x0a},//Outdoor1 H luminance 
  {0x49, 0x13},//Outdoor1 M luminance
  {0x4a, 0x10},//Outdoor1 L luminance
  {0x4b, 0x40},//Outdoor1 ratio
  {0x4c, 0x80},//Indoor H th	
  {0x4d, 0x48},//Indoor L th
  {0x4e, 0x11},//indoor H lum	
  {0x4f, 0x12},//indoor M lum
  {0x50, 0x20},//indoor L lum 
  {0x51, 0x70},//indoor ratio  0x10 -> 0x45
  {0x52, 0xa8},//dark1 H th	
  {0x53, 0x30},//dark1 L th
  {0x54, 0x28},//dark1 H lum 
  {0x55, 0x3e},//dark1 M lum
  {0x56, 0x67},//dark1 L lum
  {0x57, 0x70},//dark1 ratio
  {0x58, 0xa0},//dark2 H th
  {0x59, 0xa0},//dark2 L th
  {0x5a, 0x28},//dark2 H lum
  {0x5b, 0x3f},//dark2 M lum
  {0x5c, 0x68},//dark2 L lum
  {0x5d, 0x70},//dark2 ratio
  {0x5e, 0xa0},//dark3 H th
  {0x5f, 0x40},//dark3 L th
  {0x60, 0x29},//dark3 H lum
  {0x61, 0x3f},//dark3 M lum
  {0x62, 0x69},//dark3 L lum
  {0x63, 0x70},//dark3 ratio
  //C-filter(Out2&Out1)
  {0x70, 0x10},
  {0x71, 0x0a},
  //C-filter(Indoor&Dark3)
  {0x72, 0x10},
  {0x73, 0x0a},
  //C-filter(Dark2&Dark1)
  {0x74, 0x18},
  {0x75, 0x12},
  //DPC_CTRL
  {0x90, 0x5d},//Preview DPC off[0x5c] on[0x5d]
  //DPC-Dark1,2,3
  {0xad, 0x07},//10825
  {0xae, 0x07},//10825
  {0xaf, 0x07},//10825
  //Blue Det..
  {0xc5, 0x23},//BlueRange   2010.8.25    0x40->23 
  {0xc6, 0x20},//GreenRange  2010.8.25    0x3b->20 
  {0xd0, 0x08},//2010.8.25 
  //interpolated with average
  {0xdb, 0x38},//resolution issue 0x00->0x18->0x38 
  {0xd9, 0x04},//strong_edge detect ratio
  {0x03, 0x13},//page 13 sharpness 1D
  {0x10, 0xc5},
  {0x11, 0x7b},
  {0x12, 0x0e},
  {0x14, 0x00},
  {0x15, 0x11},//added option 1.3M 추가
  {0x20, 0x15},
  {0x21, 0x13},
  {0x22, 0x33},
  {0x23, 0x08},
  {0x24, 0x1a},
  {0x26, 0x18},
  {0x27, 0x30},
  {0x29, 0x10},
  {0x2a, 0x30},
  {0x2b, 0x02},
  {0x2c, 0x02},
  {0x25, 0x06},
  {0x2d, 0x0c},
  {0x2e, 0x12},
  {0x2f, 0x12},
  //1D Edge
  {0x50, 0x08},//out2   hi nega
  {0x53, 0x07},//       hi pos
  {0x51, 0x0c},//       mi nega
  {0x54, 0x0a},//       mi pos
  {0x52, 0x0b},//       lo nega
  {0x55, 0x08},//       lo pos
  {0x56, 0x08},//out1   hi nega
  {0x59, 0x07},//       hi pos 
  {0x57, 0x0c},//       mi nega
  {0x5a, 0x0a},//       mi pos 
  {0x58, 0x0b},//       lo nega
  {0x5b, 0x08},//       lo pos	
  //Indoor Edge
  {0x5c, 0x08},//indoor hi  nega
  {0x5f, 0x07},//       hi  pos
  {0x5d, 0x14},//       mid nega //11
  {0x60, 0x12},//       mid pos //0
  {0x5e, 0x0a},//       low nega  
  {0x61, 0x08},//       low pos
  {0x62, 0x08},//dark1  hi nega
  {0x65, 0x06},//       hi  pos   
  {0x63, 0x08},//       mid nega  
  {0x66, 0x06},//       mid pos   
  {0x64, 0x08},//       low nega  
  {0x67, 0x06},//       low pos   
  {0x68, 0x07},//dark2  hi  nega
  {0x6b, 0x05},//       hi  pos       
  {0x69, 0x07},//       mid nega      
  {0x6c, 0x05},//       mid pos       
  {0x6a, 0x07},//       low nega      
  {0x6d, 0x05},//       low pos       
  {0x6e, 0x07},//dark3  hi  nega
  {0x71, 0x05},//       hi  pos       
  {0x6f, 0x07},//       mid nega      
  {0x72, 0x05},//       mid pos       
  {0x70, 0x07},//       low nega      
  {0x73, 0x05},//       low pos       
  //2DY
  {0x80, 0xc0},//Sharpness 2D On[0xc1] Off[0xc0]
  {0x81, 0x1f},  
  {0x82, 0x01},//11
  {0x83, 0x53},
  {0x84, 0x86},//Lpf gaussian coef out2[7:6]out1[5:4]in[3:2]dark[1:0] //1.3M 추가
  {0x90, 0x05},
  {0x91, 0x05},
  {0x92, 0x33},
  {0x93, 0x30},
  {0x94, 0x03},
  {0x95, 0x14},
  {0x97, 0x30},
  {0x99, 0x30},
  {0xa0, 0x02},
  {0xa1, 0x03},
  {0xa2, 0x02},
  {0xa3, 0x03},
  {0xa4, 0x03},
  {0xa5, 0x04},
  {0xa6, 0x07},
  {0xa7, 0x08},
  {0xa8, 0x07},
  {0xa9, 0x08},
  {0xaa, 0x07},
  {0xab, 0x08},
  {0xb0, 0x1b},//out2   H Ne
  {0xb3, 0x1a},//       H Po
  {0xb1, 0x22},//       M Ne
  {0xb4, 0x21},//       M Po
  {0xb2, 0x1f},//       L Ne
  {0xb5, 0x1e},//       L Po
  {0xb6, 0x1b},//out1   H Ne   
  {0xb9, 0x1a},//       H Po   
  {0xb7, 0x22},//       M Ne   
  {0xba, 0x21},//       M Po   
  {0xb8, 0x1f},//       L Ne   
  {0xbb, 0x1e},//       L Po   
  {0xbc, 0x20},//indoor H Ne
  {0xbf, 0x1e},//       H Po
  {0xbd, 0x25},//       M Ne//25
  {0xc0, 0x23},//       M Po//23
  {0xbe, 0x24},//       L Ne 
  {0xc1, 0x22},//       L Po
  {0xc2, 0x1e},//dark1  H Ne
  {0xc5, 0x1e},//       H Po   
  {0xc3, 0x24},//       M Ne   
  {0xc6, 0x24},//       M Po   
  {0xc4, 0x20},//       L Ne   
  {0xc7, 0x20},//       L Po   
  {0xc8, 0x18},//dark2  H Ne
  {0xcb, 0x18},//       H Po   
  {0xc9, 0x20},//       M Ne   
  {0xcc, 0x20},//       M Po   
  {0xca, 0x1e},//       L Ne   
  {0xcd, 0x1e},//       L Po   
  {0xce, 0x18},//dark3  H Ne
  {0xd1, 0x18},//       H Po   
  {0xcf, 0x20},//       M Ne   
  {0xd2, 0x20},//       M Po   
  {0xd0, 0x1e},//       L Ne   
  {0xd3, 0x1e},//       L Po   
  //Page 0x14
  {0x03, 0x14},
  {0x10, 0x11},
  {0x20, 0x80},// x center gg
  {0x21, 0x80},// y center gg
  {0x22, 0x80},// x center rr
  {0x23, 0x80},// y center rr
  {0x24, 0x80},// x center bb
  {0x25, 0x80},// y center bb
  {0x28, 0x60},
  {0x29, 0x60},
  {0x40, 0x61},//R min's set
  {0x41, 0x43},//Gr
  {0x42, 0x3d},//B
  {0x43, 0x43},//Gb
  //PAGE15
  //CMC Fuction Start
  {0x03, 0x15},
  {0x10, 0x21},
  {0x14, 0x3e},//CMCOFSGH_3D
  {0x15, 0x2e},//CMCOFSGM_30
  {0x16, 0x28},//CMCOFSGL
  {0x17, 0x2f},//CMC SIGN
  //CMC_New
  {0x30, 0xad},
  {0x31, 0x32},
  {0x32, 0x05},
  {0x33, 0x1c},
  {0x34, 0xa9},
  {0x35, 0x0d},
  {0x36, 0x01},
  {0x37, 0x36},
  {0x38, 0xb7},
  //CMC OFS
  {0x40, 0x8c},
  {0x41, 0x08},
  {0x42, 0x04},
  {0x43, 0x02},
  {0x44, 0x08},
  {0x45, 0x8a},
  {0x46, 0x94},
  {0x47, 0x8c},
  {0x48, 0x20},
  //CMC POFS
  {0x50, 0x01},
  {0x51, 0x00},
  {0x52, 0x81},
  {0x53, 0x11},
  {0x54, 0x00},
  {0x55, 0x91},
  {0x56, 0x00},
  {0x57, 0x90},
  {0x58, 0x10},
  //Digital gain
  {0x80, 0x00},
  {0x85, 0x80},
  //PAGE16
  {0x03, 0x16},
  {0x10, 0x31},//GMA_CTL
  {0x18, 0x7e},//AG_ON
  {0x19, 0x7d},//AG_OFF
  {0x1a, 0x0e},//TIME_ON
  {0x1b, 0x01},//TIME_OFF
  {0x1C, 0xdc},//OUT_ON
  {0x1D, 0xfe},//OUT_OFF
  //GMA //Indoor
  {0x30, 0x00},
  {0x31, 0x07},
  {0x32, 0x1e},
  {0x33, 0x39},
  {0x34, 0x5f},
  {0x35, 0x7e},
  {0x36, 0x97},
  {0x37, 0xa7},
  {0x38, 0xb7},
  {0x39, 0xc5},
  {0x3a, 0xd1},
  {0x3b, 0xdb},
  {0x3c, 0xe3},
  {0x3d, 0xea},
  {0x3e, 0xf1},
  {0x3f, 0xf5},
  {0x40, 0xf9},
  {0x41, 0xfd},
  {0x42, 0xff},
  //RGMA //Outdoor
  {0x50, 0x00},
  {0x51, 0x03},
  {0x52, 0x16},//19
  {0x53, 0x31},//34
  {0x54, 0x55},//58
  {0x55, 0x72},//75
  {0x56, 0x8a},//8d
  {0x57, 0x9e},//a1
  {0x58, 0xae},//b2
  {0x59, 0xbc},//be
  {0x5a, 0xc8},//c9
  {0x5b, 0xd2},
  {0x5c, 0xdb},
  {0x5d, 0xe4},
  {0x5e, 0xec},
  {0x5f, 0xf1},
  {0x60, 0xf6},
  {0x61, 0xf8},
  {0x62, 0xfa},
  //BGMA
  {0x70, 0x02},
  {0x71, 0x12},
  {0x72, 0x22},
  {0x73, 0x3a},
  {0x74, 0x5b},
  {0x75, 0x73},
  {0x76, 0x8a},
  {0x77, 0x9b},
  {0x78, 0xab},
  {0x79, 0xb9},
  {0x7a, 0xc4},
  {0x7b, 0xce},
  {0x7c, 0xd8},
  {0x7d, 0xe0},
  {0x7e, 0xe8},
  {0x7f, 0xef},
  {0x80, 0xf5},
  {0x81, 0xfa},
  {0x82, 0xff},
  //PAGE17
  {0x03, 0x17},
  {0x10, 0x00},//en_cnt_check[4] | en_histogra,[0]
  {0x11, 0x0a},
  {0x12, 0x60},//0x40
  {0xc4, 0x70},//FLK200
  {0xc5, 0x5d},//FLK240
  //PAGE 18
  {0x03, 0x18},
  {0x10, 0x00},//scaler off
  {0x81, 0xe4},
  {0x82, 0xe4},
  {0x83, 0x4e},
  {0x84, 0x4e},
  //PAGE20
  {0x03, 0x20},
  {0x10, 0x0c},
  {0x11, 0x1c},
  {0x1a, 0x04},//100825
  {0x20, 0x01},//AE weight en | ae lowtemp disable  0x05->0x01 
  {0x21, 0x18},
  {0x22, 0x00},//backlight option
  {0x27, 0x2a},
  {0x28, 0xbf},
  {0x29, 0x0d},//100825  2M :: 0x0d
  // AntiBand setting
  {0x2a, 0xf0},
  {0x2b, 0xf4},//(2/120 flicker disable)
  {0x30, 0xf8},//Speed_Hunting Option_f8 78
  {0x37, 0x22},//20110225 hunting 0x28->0x24->0x22
  {0x3e, 0x20},//20110225 hunting
  {0x39, 0x22},
  {0x3a, 0xde},
  {0x3b, 0x22},
  {0x3c, 0xde},
  {0x2f, 0x00},
  {0x43, 0xc0},
  {0x56, 0x28},
  {0x57, 0x78},
  {0x58, 0x20},
  {0x59, 0x60},
  {0x5e, 0x9f},//hsync inc size 1.3mega 0x9f
  {0x5f, 0x55},//vsync inc size 1.3mega 960 0x77 --> 0x55
  //2M AE weight start
  {0x60, 0x55},
  {0x61, 0x55},
  {0x62, 0x55},
  {0x63, 0x55},
  {0x64, 0x55},
  {0x65, 0x55},
  {0x66, 0x56},
  {0x67, 0x95},
  {0x68, 0x56},
  {0x69, 0x95},
  {0x6a, 0x5a},
  {0x6b, 0xa5},
  {0x6c, 0x5a},
  {0x6d, 0xa5},
  {0x6e, 0x55},
  {0x6f, 0x55},
  {0x70, 0x32},//30
  {0x71, 0x82},//00_1*4=4
  {0x76, 0x21},//21 10
  {0x77, 0x71},//81
  {0x78, 0x22},//Y-TH1
  {0x79, 0x22},//Y-TH2
  {0x7a, 0x22},//Y-TH3
  {0x7B, 0x22},
  {0x7d, 0x22},
  {0x7e, 0x22},
  //Pll 3.0x
  {0x83, 0x02},//EXP Normal 30.00 fps 
  {0x84, 0x48},
  {0x85, 0x60},
  {0x86, 0x01},//expmin 7500.00 fps
  {0x87, 0x90},
  {0x88, 0x08},//exp max 8.00 fps 
  {0x89, 0x8f},
  {0x8a, 0x68},
  {0x8b, 0xaf},//exp100 
  {0x8c, 0xc8},
  {0x8d, 0x92},//exp120 
  {0x8e, 0x18},
  {0x91, 0x02},//exp fix 14.91 fps
  {0x92, 0xe6},
  {0x93, 0x30},
  {0x94, 0x02},
  {0x95, 0x7a},
  {0x96, 0xc4},
  {0x98, 0x9e},//outdoor time th1
  {0x99, 0x46},//outdoor time th2
  {0x9b, 0x9a},//outdoor th1
  {0x9a, 0x28},//outdoor th2
  {0x9c, 0x15},//exp limit 535.174 fps 
  {0x9d, 0xe0},
  {0x9e, 0x01},//exp unit 
  {0x9f, 0x90},
  {0xa0, 0x00},
  {0xa1, 0xc3},
  {0xa2, 0x50},
  //Exp12000
  {0xa3, 0x00},//Antibandtime/256=120*256=30720fps
  {0xa4, 0x30},
  //Capture Exptime
  {0xa5, 0x01},//Capture ExpmaxH
  {0xa6, 0x6e},//Capture ExpmaxM
  {0xa7, 0x36},//Capture ExpmaxL
  {0xa8, 0x1d},//Capture Exp100H
  {0xa9, 0x4c},//Capture Exp100L
  {0xaa, 0x18},//Capture Exp120H //PLL 2x 낮췄다고 가정.
  {0xab, 0x6a},//Capture Exp120L
  {0xac, 0x00},//Capture Exp12000H
  {0xad, 0x18},//Capture Exp12000L
  {0xae, 0x23},//Capture Outtime th2
  //AG set ag min 15
  {0xb0, 0x10},//AG
  {0xb1, 0x10},//AGMIN
  {0xb2, 0xa4},//AGMAX
  {0xb3, 0x1a},//AGLVL 
  {0xb4, 0x1a},//AGTH1
  {0xb5, 0x44},//AGTH2
  {0xb6, 0x2f},//AGBTH1
  {0xb7, 0x28},//AGBTH2 
  {0xb8, 0x25},//AGBTH3 //Adaptive_AG Min_0x2a
  {0xb9, 0x22},//AGBTH4
  {0xba, 0x21},//AGBTH5
  {0xbb, 0x20},//AGBTH6
  {0xbc, 0x38},//AGBTH7
  {0xbd, 0x37},//AGBTH8
  {0xbe, 0x36},//AGBTH9 //Adaptive_AG Min
  {0xbf, 0x36},//AGBTH10
  {0xc0, 0x35},//AGBTH11
  {0xc1, 0x35},//AGBTH12
  {0xc2, 0x30},//Adaptive AGMIN
  {0xc3, 0x30},//Adaptive AGLVL
  {0xc4, 0x30},//20091210 2a->25
  {0xc5, 0x08},//20091210 0z->1f 10/120sec
  {0xc6, 0x48},//Middle AG
  {0xcc, 0x48},//Middle AG min
  {0xca, 0xe0},//Middle DG
  {0xc7, 0x18},//Sky_gain
  {0xc8, 0xa0},//Middle indoor max c8->d6
  {0xc9, 0x80},//Middle inddor min
  //PAGE22
  {0x03, 0x22},
  {0x10, 0x6b},
  {0x11, 0x2e},//must be 0x2e
  //uniform
  {0x18, 0x00},//uniform_on  0x01 
  {0x1a, 0x54},//r_max
  {0x1b, 0x2e},//r_min
  {0x1c, 0x44},//b_max
  {0x1d, 0x2e},//b_min
  {0x1e, 0x04},//time_th
  {0x1f, 0x60},//time_th
  {0x19, 0x41},//Low temp off 0x40 -> Low temp on 0x41
  {0x20, 0x28},//AWB unstable speed  fast 0x28 slow 0x0d
  {0x21, 0x00},//skin color on
  {0x22, 0x00},
  {0x7a, 0xd6},
  {0x23, 0x40},
  {0x24, 0x07},
  {0x25, 0x3C},
  {0x26, 0x00},
  {0x27, 0x0b},
  {0x28, 0x66},
  {0x29, 0x00},
  {0x2a, 0x46},//LG yangsan 0x0a->0x46  	
  {0x2b, 0x00},
  {0x2c, 0x00},
  {0x2d, 0x7A},
  {0x2e, 0xbf},//LG yangsan ff->bf 
  {0x2f, 0x00},//lowtemp crcb method 0x00 old
  {0x30, 0x80},
  {0x31, 0x80},
  //Pixel slope
  {0x34, 0x18},
  {0x35, 0x0b},
  {0x36, 0x2a},
  {0x37, 0x3a},
  {0x38, 0x11},
  {0x39, 0x66},
  {0x46, 0x02},
  {0x4d, 0xd4},//awb stable y th
  {0x4e, 0x0a},
  //stable band
  {0x42, 0x22},//csum2
  {0x50, 0x22},//csum4
  {0x41, 0x43},//cdiff
  {0x40, 0xf3},//yth	//{0xf2->{0xf6
  //unstable band
  {0x45, 0x44},//csum2
  {0x51, 0x34},//csum4
  {0x44, 0x44},//cdiff
  {0x43, 0xf2},//yth  
  //dark band
  {0x49, 0x34},//csum2
  {0x52, 0x23},//csum4
  {0x48, 0x53},//cdiff
  {0x47, 0xf3},//yth  
  //Out door band
  {0x4c, 0x34},//csum2
  {0x53, 0x23},//csum4
  {0x4b, 0x34},//cdiff  
  {0x4a, 0xe6},//yth   
  //Csum band
  {0x54, 0x00},
  {0x55, 0xa5},//sign
  {0x56, 0x11},//ofs
  {0x57, 0x55},//ofs
  {0x5a, 0xe0},
  {0x5b, 0xf0},
  {0x5c, 0x60},
  {0x5d, 0x14},
  {0x5e, 0x40},
  {0x5f, 0x00},
  {0x60, 0xf8},
  {0x61, 0x64},
  {0x62, 0x10},
  {0x63, 0xf8},
  {0x64, 0x20},
  {0x65, 0x22},//D1/D3 valid color th
  {0x66, 0x44},//D2/D4 valid color th
  {0x67, 0x14},
  {0x68, 0x14},
  {0x69, 0x14},
  {0x6a, 0x14},
  {0x6b, 0x00},
  {0x6c, 0x00},
  {0x6d, 0x40},
  {0x6e, 0x50},
  {0x6d, 0x40},
  {0x6e, 0x50},
  {0x6f, 0x30},
  {0x70, 0x40},
  {0x71, 0x50},
  {0x72, 0x30},
  {0x73, 0x88},
  {0x74, 0x40},
  {0x75, 0x50},
  {0x76, 0x30},
  {0x77, 0x88},
  {0xe1, 0x22},
  //Gain setti2ng
  {0x80, 0x38},//r gain
  {0x81, 0x20},//g gain
  {0x82, 0x36},//b gain 
  {0x83, 0x56},//Normal R max  0x54  d65 margine
  {0x84, 0x20},//Normal R min  
  {0x85, 0x53},//Normal B max  
  {0x86, 0x20},//Normal B mim
  {0x87, 0x4e},//middle R max 
  {0x88, 0x34},//middle R min 
  {0x89, 0x38},//middle B max
  {0x8a, 0x27},//middle B min
  {0x8b, 0x3d},//bottom R max 
  {0x8c, 0x34},//bottom R min
  {0x8d, 0x34},//bottom B max 
  {0x8e, 0x2d},//bottom B min 
  // awb slop, band
  {0x8f, 0x55},//p1   53  d65 margine
  {0x90, 0x53},//p2   51
  {0x91, 0x50},//p3   4e
  {0x92, 0x4d},//p4   48
  {0x93, 0x44},//p5   42
  {0x94, 0x3a},//p6   3a
  {0x95, 0x32},//p7   32
  {0x96, 0x26},//p8   25
  {0x97, 0x1f},//p9   19
  {0x98, 0x1d},//p10  17
  {0x99, 0x19},//p11  15
  {0x9a, 0x19},//p12  13
  {0x9b, 0x99},//band12  89 d65 margine
  {0x9c, 0x88},//band34   
  {0x9d, 0x4f},//R_bandth 1
  {0x9e, 0x30},//R_bandth 2
  {0x9f, 0x2c},//R_bandth 3
  //Outdoor limit r/b
  {0xa0, 0x25},//R delta 1
  {0xa1, 0x11},//B delta 1
  {0xa2, 0x32},//R delta 23
  {0xa3, 0x21},//B delta 2
  {0xa4, 0x10},//R_TH1	1920fps  0xa->0x10
  {0xa5, 0x35},//R_TH2 529fps -> 578fps 0x3a->0x35
  {0xa6, 0x70},//R_TH3
  {0xa7, 0x00},//low temp R min
  {0xa8, 0x18},//low temp R max
  {0xad, 0x38},
  {0xae, 0x30},
  {0xaf, 0x32},
  {0xb0, 0x2c},
  {0xb1, 0x00},//lowtemp y control 0x28->0x00
  {0xb2, 0x48},
  {0xb3, 0x40},
  //Low temp Tgt
  {0xb5, 0x7f},
  {0xb6, 0x00},
  {0xb7, 0x91},//low Cb,Cr target offset 0x09->0
  {0xb8, 0x2f},//Low temp off
  {0xb9, 0x2c},//Low temp On
  {0xbc, 0x00},//Low gain cb/cb retarget point
  {0xbd, 0x36},//Low gain 80/80 point
  {0x03, 0x24},//Resol control 
  {0x60, 0x4f},//edge even frame | 16bit resol | white edge cnt | scene resol enable
  {0x61, 0x04},//even frame update
  {0x64, 0x35},//edge th1 H
  {0x65, 0x00},//edge th1 L
  {0x66, 0x26},//edge th2 H
  {0x67, 0x00},//edge th2 L
  {0x03, 0x13},
  {0x74, 0x02},//det slope en | gausian filter
  {0x75, 0x09},//1D negative gain det
  {0x76, 0x08},//1D postive  gain det
  {0x77, 0x0c},//1D hclp2 det
  {0xf8, 0x0d},//sharp2d resl coef_L => coef_h_en | slope en
  {0xf9, 0x30},//2D negative gain
  {0xfa, 0x28},//2D postive  gain
  {0xfb, 0x1e},//2D hclp2
  {0xfc, 0x37},//2D Hi  frequence Gaussian coef
  {0xfd, 0x20},//2D Hi  frequence th 
  {0xfe, 0x08},//2D Low frequence th 
  {0x03, 0x12},//false color reduction
  {0x7b, 0x10},//Detect resolution only	
  {0x7c, 0x04},//false blur offset
  {0x7d, 0x04},//false blur offset limit
  {0x03, 0x10},
  {0x37, 0x21},//YC 2d memory off
  {0x03, 0x20},
  {0x10, 0x8c},//AE ON (0x8c:60Hz   0x9c:50Hz)
  {0x03, 0x22},
  {0x10, 0xeb},//AWB ON  //0xeb
  {0x03, 0x00},//Page 0
  {0x0e, 0x05},//PLL 3
  {0x0e, 0x75},//PLL enable
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x01, 0xf0},//sleep off
	//Delay 100ms
	{CM130PC20_REG_TERM, 0x64},
	{CM130PC20_REG_TERM, CM130PC20_VAL_TERM}
};
#else
static struct sensor_reg sensor_initialize_cm130pc20[] = {
  {0x01, 0xf1}, /* sleep */
  {0x01, 0xf3}, /* s/w reset */
  {0x01, 0xf1}, /* sleep */
  /* PAGE20 */
  {0x03, 0x20},
  {0x10, 0x0c}, /* ae off  (0x0c:60Hz   0x1c:50Hz) */
  /* PAGE22 */
  {0x03, 0x22},
  {0x10, 0x6b}, /* awb off */
  /* PAGE0 */
  {0x03, 0x00},
  {0x20,0x00}, /* 1280*960 */
  {0x21,0x2A}, /* full_size */
  {0x22,0x00},
  {0x23,0x0c},
  {0x24,0x03},
  {0x25,0xc0},
  {0x26,0x05},
  {0x27,0x00},
  {0x40, 0x01}, /* Hblank 280 Oneline 1600 */
  {0x41, 0x18},
  {0x42, 0x00}, /* vblank 4 */
  {0x43, 0x04},
  {0x45, 0x04}, /* Pre1mode Camif Add modify */
  {0x46, 0x28}, /* Pre1mode Camif Add modify */
  {0x47, 0xc8}, /* Pre1mode Camif Add modify */
  /* BLC */
  {0x80, 0x08}, /* 100825 bit[6] adeptive blc   bit[3] BLC on/off */
  {0x81, 0x97}, /* 100825 */
  {0x82, 0x90}, /* 100825 */
  {0x83, 0x30}, /* 100825 */
  {0x84, 0xcc}, /* 100825 */
  {0x85, 0x00}, /* 100825 */
  {0x86, 0xd4}, /* 100825 */
  {0x88, 0x98}, /* 120127 */
  /* PAGE 0 */
  {0x03, 0x00},
  {0x90, 0x0f}, /* blc_time_th_on */
  {0x91, 0x0f}, /* blc_time_th_off */
  {0x92, 0x9c}, /* blc_ag_th_on */
  {0x93, 0x94}, /* blc_ag_th_off */
  {0x94, 0x95}, /* 091202 */
  {0x95, 0x90}, /* 091202 */
  {0x98, 0x38}, /* 100825 */
  {0xa0, 0x01},
  {0xa2, 0x01},//20100309  Gb
  {0xa4, 0x01},//20100309  Red
  {0xa6, 0x01},//20100309  Gr
  //Normal BLC
  {0xa8, 0x41},//Blue
  {0xaa, 0x41},//Gb
  {0xac, 0x41},//Red
  {0xae, 0x41},//Gr
  //Out  BLC
  {0x99, 0x43},//Red
  {0x9a, 0x43},//Gr
  {0x9b, 0x43},//Gb
  {0x9c, 0x43},//Blue
  //PAGE2
  {0x03, 0x02},
  {0x18, 0x4c},//10825  0x2c->0x4c
  {0x19, 0x00},//10825 0x00 :: pclk delay 0x00->0xc0
  {0x1a, 0x39},//10825
  {0x1c, 0x3c},//10825
  {0x1d, 0x01},//10825
  {0x1e, 0x30},//10825
  {0x1f, 0x10},//10825
  {0x20, 0x77},//10825
  {0x21, 0xed},//10825  adc bias incresment
  {0x22, 0xa7},//10825
  {0x23, 0x30},//10825 0x32->0x30 sunspot anhyunjoo
  {0x24, 0x47},//10825
  {0x27, 0x34},//10825
  {0x2b, 0x80},//10825
  {0x2e, 0x11},//10825
  {0x2f, 0xa1},//10825
  {0x30, 0x00},//10825
  {0x31, 0x99},//10825
  {0x32, 0x00},//10825
  {0x33, 0x00},//10825
  {0x34, 0x22},//10825
  {0x36, 0x01},//10825 preview2 mode support
  {0x37, 0x01},//10825 preview2 mode support
  {0x3d, 0x03},//10825
  {0x3e, 0x0d},//10825 preview2 mode support 0xb->0xd
  {0x49, 0xd1},//10825
  {0x50, 0x28},//10825
  {0x52, 0x01},//10825 horizon line noise
  {0x53, 0x81},//10825 preview2 mode suppot
  {0x54, 0x3c},//10825
  {0x55, 0x1c},//10825
  {0x56, 0x11},//10825
  {0x5d, 0xa2},//10825
  {0x5e, 0x5a},//10825
  {0x60, 0x6c},//10825
  {0x61, 0x77},
  {0x62, 0x6c},
  {0x63, 0x75},
  {0x64, 0x6c},
  {0x65, 0x75},
  {0x67, 0x0c},
  {0x68, 0x0c},
  {0x69, 0x0c},
  {0x72, 0x6d},
  {0x73, 0x74},
  {0x74, 0x6d},
  {0x75, 0x74},
  {0x76, 0x6d},
  {0x77, 0x74},
  {0x7c, 0x6b},
  {0x7d, 0x84},
  {0x80, 0x01},
  {0x81, 0x64},
  {0x82, 0x1e},
  {0x83, 0x2c},
  {0x84, 0x63},
  {0x85, 0x65},
  {0x86, 0x63},
  {0x87, 0x65},
  {0x92, 0x41},
  {0x93, 0x4e},
  {0x94, 0x63},
  {0x95, 0x65},
  {0x96, 0x63},
  {0x97, 0x65},
  {0xa0, 0x02},
  {0xa1, 0x61},
  {0xa2, 0x02},
  {0xa3, 0x61},
  {0xa4, 0x61},
  {0xa5, 0x02},
  {0xa6, 0x61},
  {0xa7, 0x02},
  {0xa8, 0x6c},
  {0xa9, 0x70},
  {0xaa, 0x6c},
  {0xab, 0x70},
  {0xac, 0x1c},
  {0xad, 0x22},
  {0xae, 0x1c},
  {0xaf, 0x22},
  {0xb0, 0x77},
  {0xb1, 0x80},
  {0xb2, 0x77},
  {0xb3, 0x80},
  {0xb4, 0x78},
  {0xb5, 0x7f},
  {0xb6, 0x78},
  {0xb7, 0x7f},
  {0xb8, 0x78},
  {0xb9, 0x7e},
  {0xba, 0x78},
  {0xbb, 0x7e},
  {0xbc, 0x79},
  {0xbd, 0x7d},
  {0xbe, 0x79},
  {0xbf, 0x7d},
  {0xc4, 0x2e},
  {0xc5, 0x3f},
  {0xc6, 0x50},
  {0xc7, 0x60},
  {0xc8, 0x2f},
  {0xc9, 0x3e},
  {0xca, 0x2f},
  {0xcb, 0x3e},
  {0xcc, 0x51},
  {0xcd, 0x5f},
  {0xce, 0x51},
  {0xcf, 0x5f},
  {0xd0, 0x0a},
  {0xd1, 0x09},
  {0xd2, 0x20},
  {0xd3, 0x00},
  {0xd4, 0x0f},//dcdc_time_th_on
  {0xd5, 0x0f},//dcdc_time_th_off
  {0xd6, 0x9c},//dcdc_ag_th_on
  {0xd7, 0x94},//dcdc_ag_th_off
  {0xe0, 0xe1},
  {0xe1, 0xe1},
  {0xe2, 0xe1},
  {0xe3, 0xe1},
  {0xe4, 0xe1},
  {0xe5, 0x01},
  {0xe9, 0x00},//2010.8.25  preview2 mode support
  {0xea, 0x64},//2010.8.25
  // PAGE 10
  {0x03, 0x10},
  {0x10, 0x01},//Ycbcr422_bit Order: YUYV
  {0x12, 0x10},//y offset[4], dif_offset[5]
  {0x13, 0x02},//contrast effet enable : 0x02
  {0x30, 0x3f},//gate clock option
  {0x34, 0x00},//hidden 10->00 100209
  {0x37, 0x01},//yc2d power save
  {0x3f, 0x04},//100825
  {0x40, 0x80},//Y offset
  {0x48, 0x80},//Contrast (Y = constrast * (Y - 128) + 128)//86
  {0x53, 0x00},//dif_offset option
  {0x55, 0x30},//dif_offset option  diff_offset max
  {0x60, 0x83},//out color sat en[7] | auto color decrement en[1] | manual color sat en[0]
  {0x61, 0x00},//sat ctrl2
  {0x62, 0xb0},//blue saturation_C0
  {0x63, 0xb0},//red saturation_B0
  {0x64, 0xff},//auto decresment on AG th
  {0x65, 0xff},//auto decresment on DG th
  {0x66, 0xe4},//Outdoor saturation step 137fps apply out th
  {0x67, 0x42},//Outdoor saturation B/R
  // PAGE 11  D_LPF, Etc..
  {0x03, 0x11},
  {0x10, 0x3f},//B[6]:Blue En  Dlpf on[4:0] Sky over off : 0x7f->3f
  {0x11, 0x20},//Uniform Full GbGr/OV-Nr
  {0x12, 0x80},//Blue MaxOpt  blue sky max filter optoin rate : 0 0xc0->80
  {0x13, 0xb8},//dark2[7] | dark2 maxfilter ratio[6:4] | dark3[3] | dark3 maxfilter ratio[2:0]
  {0x30, 0xba},//Outdoor2 H th
  {0x31, 0x10},//Outdoor2 L th
  {0x32, 0x40},//Outdoor2 gain ratio
  {0x33, 0x1a},//Outdoor2 H lum
  {0x34, 0x15},//Outdoor2 M lum
  {0x35, 0x1d},//Outdoor2 L lum
  {0x36, 0xb0},//Outdoor1 H th
  {0x37, 0x18},//Outdoor1 L th
  {0x38, 0x40},//Outdoor1 gain ratio  0x80->40
  {0x39, 0x1a},//Outdoor1 H lum       0x28->1e
  {0x3a, 0x15},//Outdoor1 M lum       0x10->15
  {0x3b, 0x1d},//Outdoor1 L lum       0x08->20
  {0x3c, 0x3f},//indoor H th//4a
  {0x3d, 0x16},//indoor L th
  {0x3e, 0x50},//indoor gain ratio    0x44  6a //44
  {0x3f, 0x14},//indoor H lum         0x12  18
  {0x40, 0x17},//indoor M lum	       0x18  1c
  {0x41, 0x18},//indoor L lum         0x18  3e
  {0x42, 0x98},//dark1 H th
  {0x43, 0x28},//dark1 L th
  {0x44, 0x65},//dark1 gain ratio
  {0x45, 0x16},//dark1 H lum         0x38->0x28
  {0x46, 0x30},//dark1 M lum         0x27->0x17
  {0x47, 0x34},//dark1 L lum         0x20->0x1a
  {0x48, 0x90},//dark2 H th
  {0x49, 0x2a},//dark2 L th
  {0x4a, 0x65},//dark2 gain ratio
  {0x4b, 0x18},//dark2 H lum
  {0x4c, 0x31},//dark2 M lum
  {0x4d, 0x36},//dark2 L lum
  {0x4e, 0x80},//dark3 H th
  {0x4f, 0x30},//dark3 L th
  {0x50, 0x65},//dark3 gain ratio
  {0x51, 0x19},//dark3 H lum
  {0x52, 0x31},//dark3 M lum
  {0x53, 0x36},//dark3 L lum
  {0x5a, 0x3f},//blue sky mode out1/2 enable  0x27->3f
  {0x5b, 0x00},//Impulse pixel enable dark123 preview 0x3f capture 0x00
  {0x5c, 0x9f},//Indoor maxfilter rate[7:5] | Uncertain onoff[4:0] 0x1f ->0x9f
  {0x60, 0x3f},//GbGr all enable
  {0x62, 0x0f},//GbGr offset
  {0x63, 0x25},//GbGr max
  {0x64, 0x10},//GbGr min
  {0x65, 0x0c},//Outdoor GbGr rate H 100% M 25% L 100%
  {0x66, 0x0c},//Indoor GbGr  rate H 100% M 25% L 100%
  {0x67, 0x00},//dark GbGr    rate H/M/L  100%
  {0x70, 0x0c},//Abberation On/Off B[1]: Outdoor B[0]: Indoor 07>>c
  {0x75, 0xa0},//Outdoor2 Abberation Luminance lvl
  {0x7d, 0xb4},//Indoor Abberation Luminance   lvl
  {0x96, 0x08},//indoor/Dark1 edgeoffset1
  {0x97, 0x14},//indoor/Dark1 center G value
  {0x98, 0xf5},//slope indoor :: left/right graph polarity, slope
  {0x99, 0x2a},//indoor uncertain ratio control
  {0x9a, 0x20},//Edgeoffset_dark
  // PAGE 12  YC_LPF
  {0x03, 0x12},
  {0x20, 0x16},//Yc2d ctrl1 Preview Yc2d    off[0x16] on[0x17]
  {0x21, 0x0e},//Yc2d ctrl2 Preview Cfilter off[0x0e] on[0x0f]
  {0x22, 0x06},//Yc2d ctrl3 C filter mask outdoor1 | Indoor
  {0x23, 0x00},
  {0x24, 0x59},
  {0x25, 0x00},//2010.8.25 bit[5] off -> sharpness pre block off
  {0x2a, 0x01},
  {0x2e, 0x00},//2010.8.25
  //region th
  {0x30, 0x35},//Texture region(most detail)
  {0x31, 0xa0},//STD uniform1 most blur region
  {0x32, 0xb0},//STD uniform2      2nd blur
  {0x33, 0xc0},//STD uniform3      3rd blur
  {0x34, 0xd0},//STD normal noise1 4th blur
  {0x35, 0xe0},//STD normal noise2 5th blur
  {0x36, 0xff},//STD normal noise3 6th blur
  //add for reducing the color bluring
  {0x3b, 0x06},
  {0x3c, 0x06},
  {0x40, 0x83},//Outdoor2 H th
  {0x41, 0x20},//Outdoor2 L th
  {0x42, 0x0a},//Outdoor2 H luminance
  {0x43, 0x13},//Outdoor2 M luminance
  {0x44, 0x10},//Outdoor2 l luminance
  {0x45, 0x40},//Outdoor2 ratio
  {0x46, 0x83},//Outdoor1 H th
  {0x47, 0x20},//Outdoor1 L th
  {0x48, 0x0a},//Outdoor1 H luminance
  {0x49, 0x13},//Outdoor1 M luminance
  {0x4a, 0x10},//Outdoor1 L luminance
  {0x4b, 0x40},//Outdoor1 ratio
  {0x4c, 0x80},//Indoor H th
  {0x4d, 0x48},//Indoor L th
  {0x4e, 0x11},//indoor H lum
  {0x4f, 0x12},//indoor M lum
  {0x50, 0x20},//indoor L lum
  {0x51, 0x70},//indoor ratio  0x10 -> 0x45
  {0x52, 0xa8},//dark1 H th
  {0x53, 0x30},//dark1 L th
  {0x54, 0x28},//dark1 H lum
  {0x55, 0x3e},//dark1 M lum
  {0x56, 0x67},//dark1 L lum
  {0x57, 0x70},//dark1 ratio
  {0x58, 0xa0},//dark2 H th
  {0x59, 0xa0},//dark2 L th
  {0x5a, 0x28},//dark2 H lum
  {0x5b, 0x3f},//dark2 M lum
  {0x5c, 0x68},//dark2 L lum
  {0x5d, 0x70},//dark2 ratio
  {0x5e, 0xa0},//dark3 H th
  {0x5f, 0x40},//dark3 L th
  {0x60, 0x29},//dark3 H lum
  {0x61, 0x3f},//dark3 M lum
  {0x62, 0x69},//dark3 L lum
  {0x63, 0x70},//dark3 ratio
  //C-filter(Out2&Out1)
  {0x70, 0x10},
  {0x71, 0x0a},
  //C-filter(Indoor&Dark3)
  {0x72, 0x10},
  {0x73, 0x0a},
  //C-filter(Dark2&Dark1)
  {0x74, 0x18},
  {0x75, 0x12},
  //DPC_CTRL
  {0x90, 0x5d},//Preview DPC off[0x5c] on[0x5d]
  //DPC-Dark1,2,3
  {0xad, 0x07},//10825
  {0xae, 0x07},//10825
  {0xaf, 0x07},//10825
  //Blue Det..
  {0xc5, 0x23},//BlueRange   2010.8.25    0x40->23
  {0xc6, 0x20},//GreenRange  2010.8.25    0x3b->20
  {0xd0, 0x08},//2010.8.25
  //interpolated with average
  {0xdb, 0x38},//resolution issue 0x00->0x18->0x38
  {0xd9, 0x04},//strong_edge detect ratio
  {0x03, 0x13},//page 13 sharpness 1D
  {0x10, 0xc5},
  {0x11, 0x7b},
  {0x12, 0x0e},
  {0x14, 0x00},
  {0x15, 0x11},//added option 1.3M Ãß°¡
  {0x20, 0x15},
  {0x21, 0x13},
  {0x22, 0x33},
  {0x23, 0x08},
  {0x24, 0x1a},
  {0x26, 0x18},
  {0x27, 0x30},
  {0x29, 0x10},
  {0x2a, 0x30},
  {0x2b, 0x02},
  {0x2c, 0x02},
  {0x25, 0x06},
  {0x2d, 0x0c},
  {0x2e, 0x12},
  {0x2f, 0x12},
  //1D Edge
  {0x50, 0x08},//out2   hi nega
  {0x53, 0x07},//       hi pos
  {0x51, 0x0c},//       mi nega
  {0x54, 0x0a},//       mi pos
  {0x52, 0x0b},//       lo nega
  {0x55, 0x08},//       lo pos
  {0x56, 0x08},//out1   hi nega
  {0x59, 0x07},//       hi pos
  {0x57, 0x0c},//       mi nega
  {0x5a, 0x0a},//       mi pos
  {0x58, 0x0b},//       lo nega
  {0x5b, 0x08},//       lo pos
  //Indoor Edge
  {0x5c, 0x08},//indoor hi  nega
  {0x5f, 0x07},//       hi  pos
  {0x5d, 0x14},//       mid nega //11
  {0x60, 0x12},//       mid pos //0
  {0x5e, 0x0a},//       low nega
  {0x61, 0x08},//       low pos
  {0x62, 0x08},//dark1  hi nega
  {0x65, 0x06},//       hi  pos
  {0x63, 0x08},//       mid nega
  {0x66, 0x06},//       mid pos
  {0x64, 0x08},//       low nega
  {0x67, 0x06},//       low pos
  {0x68, 0x07},//dark2  hi  nega
  {0x6b, 0x05},//       hi  pos
  {0x69, 0x07},//       mid nega
  {0x6c, 0x05},//       mid pos
  {0x6a, 0x07},//       low nega
  {0x6d, 0x05},//       low pos
  {0x6e, 0x07},//dark3  hi  nega
  {0x71, 0x05},//       hi  pos
  {0x6f, 0x07},//       mid nega
  {0x72, 0x05},//       mid pos
  {0x70, 0x07},//       low nega
  {0x73, 0x05},//       low pos
  //2DY
  {0x80, 0xc0},//Sharpness 2D On[0xc1] Off[0xc0]
  {0x81, 0x1f},
  {0x82, 0x01},//11
  {0x83, 0x53},
  {0x84, 0x86},//Lpf gaussian coef out2[7:6]out1[5:4]in[3:2]dark[1:0] //1.3M Ãß°¡
  {0x90, 0x05},
  {0x91, 0x05},
  {0x92, 0x33},
  {0x93, 0x30},
  {0x94, 0x03},
  {0x95, 0x14},
  {0x97, 0x30},
  {0x99, 0x30},
  {0xa0, 0x02},
  {0xa1, 0x03},
  {0xa2, 0x02},
  {0xa3, 0x03},
  {0xa4, 0x03},
  {0xa5, 0x04},
  {0xa6, 0x07},
  {0xa7, 0x08},
  {0xa8, 0x07},
  {0xa9, 0x08},
  {0xaa, 0x07},
  {0xab, 0x08},
  {0xb0, 0x1b},//out2   H Ne
  {0xb3, 0x1a},//       H Po
  {0xb1, 0x22},//       M Ne
  {0xb4, 0x21},//       M Po
  {0xb2, 0x1f},//       L Ne
  {0xb5, 0x1e},//       L Po
  {0xb6, 0x1b},//out1   H Ne
  {0xb9, 0x1a},//       H Po
  {0xb7, 0x22},//       M Ne
  {0xba, 0x21},//       M Po
  {0xb8, 0x1f},//       L Ne
  {0xbb, 0x1e},//       L Po
  {0xbc, 0x20},//indoor H Ne
  {0xbf, 0x1e},//       H Po
  {0xbd, 0x25},//       M Ne//25
  {0xc0, 0x23},//       M Po//23
  {0xbe, 0x24},//       L Ne
  {0xc1, 0x22},//       L Po
  {0xc2, 0x1e},//dark1  H Ne
  {0xc5, 0x1e},//       H Po
  {0xc3, 0x24},//       M Ne
  {0xc6, 0x24},//       M Po
  {0xc4, 0x20},//       L Ne
  {0xc7, 0x20},//       L Po
  {0xc8, 0x18},//dark2  H Ne
  {0xcb, 0x18},//       H Po
  {0xc9, 0x20},//       M Ne
  {0xcc, 0x20},//       M Po
  {0xca, 0x1e},//       L Ne
  {0xcd, 0x1e},//       L Po
  {0xce, 0x18},//dark3  H Ne
  {0xd1, 0x18},//       H Po
  {0xcf, 0x20},//       M Ne
  {0xd2, 0x20},//       M Po
  {0xd0, 0x1e},//       L Ne
  {0xd3, 0x1e},//       L Po
  //Page 0x14
  {0x03, 0x14},
  {0x10, 0x11},
  {0x20, 0x80},// x center gg
  {0x21, 0x80},// y center gg
  {0x22, 0x80},// x center rr
  {0x23, 0x80},// y center rr
  {0x24, 0x80},// x center bb
  {0x25, 0x80},// y center bb
  {0x28, 0x60},
  {0x29, 0x60},
  {0x40, 0x61},//R min's set
  {0x41, 0x43},//Gr
  {0x42, 0x3d},//B
  {0x43, 0x43},//Gb
  //PAGE15
  //CMC Fuction Start
  {0x03, 0x15},
  {0x10, 0x21},
  {0x14, 0x3e},//CMCOFSGH_3D
  {0x15, 0x2e},//CMCOFSGM_30
  {0x16, 0x28},//CMCOFSGL
  {0x17, 0x2f},//CMC SIGN
  //CMC_New
  {0x30, 0xad},
  {0x31, 0x32},
  {0x32, 0x05},
  {0x33, 0x1c},
  {0x34, 0xa9},
  {0x35, 0x0d},
  {0x36, 0x01},
  {0x37, 0x36},
  {0x38, 0xb7},
  //CMC OFS
  {0x40, 0x8c},
  {0x41, 0x08},
  {0x42, 0x04},
  {0x43, 0x02},
  {0x44, 0x08},
  {0x45, 0x8a},
  {0x46, 0x94},
  {0x47, 0x8c},
  {0x48, 0x20},
  //CMC POFS
  {0x50, 0x01},
  {0x51, 0x00},
  {0x52, 0x81},
  {0x53, 0x11},
  {0x54, 0x00},
  {0x55, 0x91},
  {0x56, 0x00},
  {0x57, 0x90},
  {0x58, 0x10},
  //Digital gain
  {0x80, 0x00},
  {0x85, 0x80},
  //PAGE16
  {0x03, 0x16},
  {0x10, 0x31},//GMA_CTL
  {0x18, 0x7e},//AG_ON
  {0x19, 0x7d},//AG_OFF
  {0x1a, 0x0e},//TIME_ON
  {0x1b, 0x01},//TIME_OFF
  {0x1C, 0xdc},//OUT_ON
  {0x1D, 0xfe},//OUT_OFF
  //GMA //Indoor
  {0x30, 0x00},
  {0x31, 0x07},
  {0x32, 0x1e},
  {0x33, 0x39},
  {0x34, 0x5f},
  {0x35, 0x7e},
  {0x36, 0x97},
  {0x37, 0xa7},
  {0x38, 0xb7},
  {0x39, 0xc5},
  {0x3a, 0xd1},
  {0x3b, 0xdb},
  {0x3c, 0xe3},
  {0x3d, 0xea},
  {0x3e, 0xf1},
  {0x3f, 0xf5},
  {0x40, 0xf9},
  {0x41, 0xfd},
  {0x42, 0xff},
  //RGMA //Outdoor
  {0x50, 0x00},
  {0x51, 0x03},
  {0x52, 0x16},//19
  {0x53, 0x31},//34
  {0x54, 0x55},//58
  {0x55, 0x72},//75
  {0x56, 0x8a},//8d
  {0x57, 0x9e},//a1
  {0x58, 0xae},//b2
  {0x59, 0xbc},//be
  {0x5a, 0xc8},//c9
  {0x5b, 0xd2},
  {0x5c, 0xdb},
  {0x5d, 0xe4},
  {0x5e, 0xec},
  {0x5f, 0xf1},
  {0x60, 0xf6},
  {0x61, 0xf8},
  {0x62, 0xfa},
  //BGMA
  {0x70, 0x02},
  {0x71, 0x12},
  {0x72, 0x22},
  {0x73, 0x3a},
  {0x74, 0x5b},
  {0x75, 0x73},
  {0x76, 0x8a},
  {0x77, 0x9b},
  {0x78, 0xab},
  {0x79, 0xb9},
  {0x7a, 0xc4},
  {0x7b, 0xce},
  {0x7c, 0xd8},
  {0x7d, 0xe0},
  {0x7e, 0xe8},
  {0x7f, 0xef},
  {0x80, 0xf5},
  {0x81, 0xfa},
  {0x82, 0xff},
  //PAGE17
  {0x03, 0x17},
  {0x10, 0x00},//en_cnt_check[4] | en_histogra,[0]
  {0x11, 0x0a},
  {0x12, 0x60},//0x40
  {0xc4, 0x70},//FLK200
  {0xc5, 0x5d},//FLK240
  //PAGE 18
  {0x03, 0x18},
  {0x10, 0x00},//scaler off
  {0x81, 0xe4},
  {0x82, 0xe4},
  {0x83, 0x4e},
  {0x84, 0x4e},
  //PAGE20
  {0x03, 0x20},
  {0x10, 0x0c},
  {0x11, 0x1c},
  {0x1a, 0x04},//100825
  {0x20, 0x01},//AE weight en | ae lowtemp disable  0x05->0x01
  {0x21, 0x18},
  {0x22, 0x00},//backlight option
  {0x27, 0x2a},
  {0x28, 0xbf},
  {0x29, 0x0d},//100825  2M :: 0x0d
  // AntiBand setting
  {0x2a, 0xf0},
  {0x2b, 0xf4},//(2/120 flicker disable)
  {0x30, 0xf8},//Speed_Hunting Option_f8 78
  {0x37, 0x22},//20110225 hunting 0x28->0x24->0x22
  {0x3e, 0x20},//20110225 hunting
  {0x39, 0x22},
  {0x3a, 0xde},
  {0x3b, 0x22},
  {0x3c, 0xde},
  {0x2f, 0x00},
  {0x43, 0xc0},
  {0x56, 0x28},
  {0x57, 0x78},
  {0x58, 0x20},
  {0x59, 0x60},
  {0x5e, 0x9f},//hsync inc size 1.3mega 0x9f
  {0x5f, 0x55},//vsync inc size 1.3mega 960 0x77 --> 0x55
  //2M AE weight start
  {0x60, 0x55},
  {0x61, 0x55},
  {0x62, 0x55},
  {0x63, 0x55},
  {0x64, 0x55},
  {0x65, 0x55},
  {0x66, 0x56},
  {0x67, 0x95},
  {0x68, 0x56},
  {0x69, 0x95},
  {0x6a, 0x5a},
  {0x6b, 0xa5},
  {0x6c, 0x5a},
  {0x6d, 0xa5},
  {0x6e, 0x55},
  {0x6f, 0x55},
  {0x70, 0x32},//30
  {0x71, 0x82},//00_1*4=4
  {0x76, 0x21},//21 10
  {0x77, 0x71},//81
  {0x78, 0x22},//Y-TH1
  {0x79, 0x22},//Y-TH2
  {0x7a, 0x22},//Y-TH3
  {0x7B, 0x22},
  {0x7d, 0x22},
  {0x7e, 0x22},
  //Pll 3.0x
  {0x83, 0x02},//EXP Normal 30.00 fps
  {0x84, 0x48},
  {0x85, 0x60},
  {0x86, 0x01},//expmin 7500.00 fps
  {0x87, 0x90},
  {0x88, 0x08},//exp max 8.00 fps
  {0x89, 0x8f},
  {0x8a, 0x68},
  {0x8b, 0xaf},//exp100
  {0x8c, 0xc8},
  {0x8d, 0x92},//exp120
  {0x8e, 0x18},
  {0x91, 0x02},//exp fix 14.91 fps
  {0x92, 0xe6},
  {0x93, 0x30},
  {0x94, 0x02},
  {0x95, 0x7a},
  {0x96, 0xc4},
  {0x98, 0x9e},//outdoor time th1
  {0x99, 0x46},//outdoor time th2
  {0x9b, 0x9a},//outdoor th1
  {0x9a, 0x28},//outdoor th2
  {0x9c, 0x15},//exp limit 535.174 fps
  {0x9d, 0xe0},
  {0x9e, 0x01},//exp unit
  {0x9f, 0x90},
  {0xa0, 0x00},
  {0xa1, 0xc3},
  {0xa2, 0x50},
  //Exp12000
  {0xa3, 0x00},//Antibandtime/256=120*256=30720fps
  {0xa4, 0x30},
  //Capture Exptime
  {0xa5, 0x01},//Capture ExpmaxH
  {0xa6, 0x6e},//Capture ExpmaxM
  {0xa7, 0x36},//Capture ExpmaxL
  {0xa8, 0x1d},//Capture Exp100H
  {0xa9, 0x4c},//Capture Exp100L
  {0xaa, 0x18},//Capture Exp120H //PLL 2x ³·ÃèŽÙ°í °¡Á€.
  {0xab, 0x6a},//Capture Exp120L
  {0xac, 0x00},//Capture Exp12000H
  {0xad, 0x18},//Capture Exp12000L
  {0xae, 0x23},//Capture Outtime th2
  //AG set ag min 15
  {0xb0, 0x10},//AG
  {0xb1, 0x10},//AGMIN
  {0xb2, 0xa4},//AGMAX
  {0xb3, 0x1a},//AGLVL
  {0xb4, 0x1a},//AGTH1
  {0xb5, 0x44},//AGTH2
  {0xb6, 0x2f},//AGBTH1
  {0xb7, 0x28},//AGBTH2
  {0xb8, 0x25},//AGBTH3 //Adaptive_AG Min_0x2a
  {0xb9, 0x22},//AGBTH4
  {0xba, 0x21},//AGBTH5
  {0xbb, 0x20},//AGBTH6
  {0xbc, 0x38},//AGBTH7
  {0xbd, 0x37},//AGBTH8
  {0xbe, 0x36},//AGBTH9 //Adaptive_AG Min
  {0xbf, 0x36},//AGBTH10
  {0xc0, 0x35},//AGBTH11
  {0xc1, 0x35},//AGBTH12
  {0xc2, 0x30},//Adaptive AGMIN
  {0xc3, 0x30},//Adaptive AGLVL
  {0xc4, 0x30},//20091210 2a->25
  {0xc5, 0x08},//20091210 0z->1f 10/120sec
  {0xc6, 0x48},//Middle AG
  {0xcc, 0x48},//Middle AG min
  {0xca, 0xe0},//Middle DG
  {0xc7, 0x18},//Sky_gain
  {0xc8, 0xa0},//Middle indoor max c8->d6
  {0xc9, 0x80},//Middle inddor min
  //PAGE22
  {0x03, 0x22},
  {0x10, 0x6b},
  {0x11, 0x2e},//must be 0x2e
  //uniform
  {0x18, 0x00},//uniform_on  0x01
  {0x1a, 0x54},//r_max
  {0x1b, 0x2e},//r_min
  {0x1c, 0x44},//b_max
  {0x1d, 0x2e},//b_min
  {0x1e, 0x04},//time_th
  {0x1f, 0x60},//time_th
  {0x19, 0x41},//Low temp off 0x40 -> Low temp on 0x41
  {0x20, 0x28},//AWB unstable speed  fast 0x28 slow 0x0d
  {0x21, 0x00},//skin color on
  {0x22, 0x00},
  {0x7a, 0xd6},
  {0x23, 0x40},
  {0x24, 0x07},
  {0x25, 0x3C},
  {0x26, 0x00},
  {0x27, 0x0b},
  {0x28, 0x66},
  {0x29, 0x00},
  {0x2a, 0x46},//LG yangsan 0x0a->0x46
  {0x2b, 0x00},
  {0x2c, 0x00},
  {0x2d, 0x7A},
  {0x2e, 0xbf},//LG yangsan ff->bf
  {0x2f, 0x00},//lowtemp crcb method 0x00 old
  {0x30, 0x80},
  {0x31, 0x80},
  //Pixel slope
  {0x34, 0x18},
  {0x35, 0x0b},
  {0x36, 0x2a},
  {0x37, 0x3a},
  {0x38, 0x11},
  {0x39, 0x66},
  {0x46, 0x02},
  {0x4d, 0xd4},//awb stable y th
  {0x4e, 0x0a},
  //stable band
  {0x42, 0x22},//csum2
  {0x50, 0x22},//csum4
  {0x41, 0x43},//cdiff
  {0x40, 0xf3},//yth	//{0xf2->{0xf6
  //unstable band
  {0x45, 0x44},//csum2
  {0x51, 0x34},//csum4
  {0x44, 0x44},//cdiff
  {0x43, 0xf2},//yth
  //dark band
  {0x49, 0x34},//csum2
  {0x52, 0x23},//csum4
  {0x48, 0x53},//cdiff
  {0x47, 0xf3},//yth
  //Out door band
  {0x4c, 0x34},//csum2
  {0x53, 0x23},//csum4
  {0x4b, 0x34},//cdiff
  {0x4a, 0xe6},//yth
  //Csum band
  {0x54, 0x00},
  {0x55, 0xa5},//sign
  {0x56, 0x11},//ofs
  {0x57, 0x55},//ofs
  {0x5a, 0xe0},
  {0x5b, 0xf0},
  {0x5c, 0x60},
  {0x5d, 0x14},
  {0x5e, 0x40},
  {0x5f, 0x00},
  {0x60, 0xf8},
  {0x61, 0x64},
  {0x62, 0x10},
  {0x63, 0xf8},
  {0x64, 0x20},
  {0x65, 0x22},//D1/D3 valid color th
  {0x66, 0x44},//D2/D4 valid color th
  {0x67, 0x14},
  {0x68, 0x14},
  {0x69, 0x14},
  {0x6a, 0x14},
  {0x6b, 0x00},
  {0x6c, 0x00},
  {0x6d, 0x40},
  {0x6e, 0x50},
  {0x6d, 0x40},
  {0x6e, 0x50},
  {0x6f, 0x30},
  {0x70, 0x40},
  {0x71, 0x50},
  {0x72, 0x30},
  {0x73, 0x88},
  {0x74, 0x40},
  {0x75, 0x50},
  {0x76, 0x30},
  {0x77, 0x88},
  {0xe1, 0x22},
  //Gain setti2ng
  {0x80, 0x38},//r gain
  {0x81, 0x20},//g gain
  {0x82, 0x36},//b gain
  {0x83, 0x56},//Normal R max  0x54  d65 margine
  {0x84, 0x20},//Normal R min
  {0x85, 0x53},//Normal B max
  {0x86, 0x20},//Normal B mim
  {0x87, 0x4e},//middle R max
  {0x88, 0x34},//middle R min
  {0x89, 0x38},//middle B max
  {0x8a, 0x27},//middle B min
  {0x8b, 0x3d},//bottom R max
  {0x8c, 0x34},//bottom R min
  {0x8d, 0x34},//bottom B max
  {0x8e, 0x2d},//bottom B min
  // awb slop, band
  {0x8f, 0x55},//p1   53  d65 margine
  {0x90, 0x53},//p2   51
  {0x91, 0x50},//p3   4e
  {0x92, 0x4d},//p4   48
  {0x93, 0x44},//p5   42
  {0x94, 0x3a},//p6   3a
  {0x95, 0x32},//p7   32
  {0x96, 0x26},//p8   25
  {0x97, 0x1f},//p9   19
  {0x98, 0x1d},//p10  17
  {0x99, 0x19},//p11  15
  {0x9a, 0x19},//p12  13
  {0x9b, 0x99},//band12  89 d65 margine
  {0x9c, 0x88},//band34
  {0x9d, 0x4f},//R_bandth 1
  {0x9e, 0x30},//R_bandth 2
  {0x9f, 0x2c},//R_bandth 3
  //Outdoor limit r/b
  {0xa0, 0x25},//R delta 1
  {0xa1, 0x11},//B delta 1
  {0xa2, 0x32},//R delta 23
  {0xa3, 0x21},//B delta 2
  {0xa4, 0x10},//R_TH1	1920fps  0xa->0x10
  {0xa5, 0x35},//R_TH2 529fps -> 578fps 0x3a->0x35
  {0xa6, 0x70},//R_TH3
  {0xa7, 0x00},//low temp R min
  {0xa8, 0x18},//low temp R max
  {0xad, 0x38},
  {0xae, 0x30},
  {0xaf, 0x32},
  {0xb0, 0x2c},
  {0xb1, 0x00},//lowtemp y control 0x28->0x00
  {0xb2, 0x48},
  {0xb3, 0x40},
  //Low temp Tgt
  {0xb5, 0x7f},
  {0xb6, 0x00},
  {0xb7, 0x91},//low Cb,Cr target offset 0x09->0
  {0xb8, 0x2f},//Low temp off
  {0xb9, 0x2c},//Low temp On
  {0xbc, 0x00},//Low gain cb/cb retarget point
  {0xbd, 0x36},//Low gain 80/80 point
  {0x03, 0x24},//Resol control
  {0x60, 0x4f},//edge even frame | 16bit resol | white edge cnt | scene resol enable
  {0x61, 0x04},//even frame update
  {0x64, 0x35},//edge th1 H
  {0x65, 0x00},//edge th1 L
  {0x66, 0x26},//edge th2 H
  {0x67, 0x00},//edge th2 L
  {0x03, 0x13},
  {0x74, 0x02},//det slope en | gausian filter
  {0x75, 0x09},//1D negative gain det
  {0x76, 0x08},//1D postive  gain det
  {0x77, 0x0c},//1D hclp2 det
  {0xf8, 0x0d},//sharp2d resl coef_L => coef_h_en | slope en
  {0xf9, 0x30},//2D negative gain
  {0xfa, 0x28},//2D postive  gain
  {0xfb, 0x1e},//2D hclp2
  {0xfc, 0x37},//2D Hi  frequence Gaussian coef
  {0xfd, 0x20},//2D Hi  frequence th
  {0xfe, 0x08},//2D Low frequence th
  {0x03, 0x12},//false color reduction
  {0x7b, 0x10},//Detect resolution only
  {0x7c, 0x04},//false blur offset
  {0x7d, 0x04},//false blur offset limit
  {0x03, 0x10},
  {0x37, 0x21},//YC 2d memory off
  {0x03, 0x20},
  {0x10, 0x8c},//AE ON (0x8c:60Hz   0x9c:50Hz)
  {0x03, 0x22},
  {0x10, 0xeb},//AWB ON  //0xeb
  {0x03, 0x00},//Page 0
  {0x0e, 0x05},//PLL 3
  {0x0e, 0x75},//PLL enable
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x03, 0x00},
  {0x01, 0xf0},//sleep off
	//Delay 100ms
	{CM130PC20_REG_TERM, 0x64},
	{CM130PC20_REG_TERM, CM130PC20_VAL_TERM}
};
#endif
struct cm130_state {
	struct v4l2_subdev	subdev;
	struct v4l2_mbus_framefmt fmt;
	struct media_pad	pad;	/* for media device pad */
	struct i2c_client	*client;
	struct gpio_desc *enable_gpio;	// camera power
	struct gpio_desc *reset_gpio;
	struct gpio_desc *door_gpio;	// door-camera power
};

struct reg_value {
	u8 reg_addr;
	u8 val;
	u8 mask;
	u32 delay_ms;
};

static inline struct cm130_state *to_state
	(struct v4l2_subdev *subdev)
{
	struct cm130_state *state =
		container_of(subdev, struct cm130_state, subdev);
	return state;
}

static inline struct i2c_client *to_client
	(struct v4l2_subdev *subdev)
{
	return (struct i2c_client *)v4l2_get_subdevdata(subdev);
}

static int sensor_cm130_write_reg(struct i2c_client *client, u8 reg, u8 val)
{
	struct i2c_msg msg;
	u8 buf[2];
	int ret;

	buf[0] = reg;
	buf[1] = val;

	msg.addr = client->addr;
	msg.flags = client->flags;
	msg.buf = buf;
	msg.len = sizeof(buf);

	ret = i2c_transfer(client->adapter, &msg, 1);
	if (ret < 0) {
		dev_err(&client->dev, "%s: error: reg=%x, val=%x\n",
			__func__, reg, val);
		return ret;
	}

	return 0;
}

static int sensor_cm130_read_reg(struct i2c_client *client, u8 reg, u8 *val)
{
	struct i2c_msg msg[2];
	u8 buf[1];
	int ret;

	buf[0] = reg;

	msg[0].addr = client->addr;
	msg[0].flags = client->flags;
	msg[0].buf = buf;
	msg[0].len = sizeof(buf);

	msg[1].addr = client->addr;
	msg[1].flags = client->flags | I2C_M_RD;
	msg[1].buf = buf;
	msg[1].len = 1;

	ret = i2c_transfer(client->adapter, msg, 2);
	if (ret < 0)
		return ret;

	*val = buf[0];
	return 0;
}
static void diff_read_regs_cm130pc20(struct i2c_client *client, const struct sensor_reg reglist[])
{
	int err;
	unsigned char sdata[2] = {0, 0};
	unsigned char rdata = 0;
	const struct sensor_reg *next = reglist;
	
	dprintk("%s()\n",__func__);

	while (!((next->reg == CM130PC20_REG_TERM) && (next->val == CM130PC20_VAL_TERM))) {
		sdata[0] = (unsigned char)(next->reg) & 0xff;
		sdata[1] = (unsigned char)(next->val) & 0xff;
    
		if (sdata[0] == 0x03) {
			//err = DDI_I2C_Write(sdata, 1, 1);
			err = sensor_cm130_write_reg(client, sdata[0], sdata[1]);
			if (err) {
				dprintk("%s(): ERROR: Sensor I2C !!!! \n",__func__);
			}
		} else {
			//DDI_I2C_Read (sdata[0], 1, &rdata, 1);
			sensor_cm130_read_reg(client, sdata[0], &rdata);
			if (sdata[1] == rdata) {
				dprintk("%s(): READ same 0x%02X (0x%02X == 0x%02X)\n",__func__, sdata[0], sdata[1], rdata);
			} else {
				dprintk("%s(): READ diff 0x%02X (0x%02X != 0x%02X)\n",__func__, sdata[0], sdata[1], rdata);
			}
		}

		next++;
	}
}

static int write_regs_cm130pc20(struct i2c_client *client, const struct sensor_reg reglist[])
{
	int err;
	int err_cnt = 0;	
	unsigned char data[2] = {0, 0};
	const struct sensor_reg *next = reglist;
	
	dprintk("%s()\n",__func__);

	while (!((next->reg == CM130PC20_REG_TERM) && (next->val == CM130PC20_VAL_TERM)))
	{
		if(next->reg == CM130PC20_REG_TERM && next->val != CM130PC20_VAL_TERM)
		{
			msleep(next->val);
			//dprintk("%s(): Sensor init Delay[%d]\n",__func__, next->val);
			next++;
		}
		else
		{
			data[0] = (unsigned char)(next->reg) & 0xff;
			data[1] = (unsigned char)(next->val) & 0xff;
				
			//err = DDI_I2C_Write(data, 1, 1);
			err = sensor_cm130_write_reg(client, data[0], data[1]);
			if(err)
			{
				err_cnt++;
				if(err_cnt >= 3)
				{
					printk("%s: ERROR: Sensor I2C !!!! \n",__func__); 
					return err;
				}
			}
			else
			{
				err_cnt = 0;
				next++;
			}
		}
	}

	return 0;
}
/*
static int sensor_zn240_load_regs(struct v4l2_subdev *subdev,
			    const struct reg_value *regs, int size)
{
	unsigned int i;
	u32 delay_ms;
	u8 reg_addr;
	u8 val;
	int ret = 0;
	struct i2c_client *client = to_client(subdev);

	for (i = 0; i < size; ++i, ++regs) {
		delay_ms = regs->delay_ms;
		reg_addr = regs->reg_addr;
		val = regs->val;

		ret = sensor_zn240_write_reg(client, reg_addr, val);
		if (ret)
			break;

		if (delay_ms)
			usleep_range(1000*delay_ms, 1000*delay_ms+100);
	}

	return ret;
}
*/

static int sensor_cm130_init(struct v4l2_subdev *subdev, u32 val)
{
	int ret = 0;
	struct i2c_client *client = to_client(subdev);
	u8 id_h = 0, id_l = 0;

	WARN_ON(!subdev);

	dprintk("%s(): start\n", __func__);
	//dev_info(&client->dev, "%s start\n", __func__);

	ret = write_regs_cm130pc20(client, sensor_initialize_cm130pc20);
	//I2C 확인 용
	//diff_read_regs_cm130pc20(client, sensor_initialize_cm130pc20);

#if 0
	/* Set page 0 */
	ret = sensor_zn240_write_reg(client, ZN240_PAGE, 0x00);
	if (ret < 0) {
		dev_err(&client->dev, "failed to set page 0\n");
		return ret;
	}

	ret = sensor_zn240_read_reg(client, 0x01, &id_h);
	if (ret < 0) {
		dev_err(&client->dev, "failed to read id_h\n");
		return ret;
	}

	ret = sensor_zn240_read_reg(client, 0x02, &id_l);
	if (ret < 0) {
		dev_err(&client->dev, "failed to read id_l\n");
		return ret;
	}

	dev_info(&client->dev, "id=0x%02x, 0x%02x\n", id_h, id_l);

	/* init member */
	ret = sensor_zn240_load_regs(subdev, zn240_init_setting,
				ARRAY_SIZE(zn240_init_setting));
	if (ret < 0) {
		dev_err(&client->dev, "init_reg failed\n");
		return ret;
	}

	dev_info(&client->dev, "%s end\n", __func__);

	msleep(100);
#endif
	return ret;
}

static int sensor_cm130_s_stream(struct v4l2_subdev *subdev,
	int enable)
{
	int ret = 0;
	struct i2c_client *client = to_client(subdev);

	dprintk("%s(): enable(%d)\n", __func__, enable);
	//dev_info(&client->dev, "%s %d\n", __func__, enable);

	if (enable) {
		ret = sensor_cm130_init(subdev, 1);
		if (ret) {
			dev_err(&client->dev, "stream_on is fail(%d)", ret);
			goto p_err;
		}
	}

p_err:
	return ret;
}

static int sensor_cm130_subdev_open(struct v4l2_subdev *sd,
	struct v4l2_subdev_fh *fh)
{
	dprintk("%s()\n", __func__);
	/*
	struct cm130_state *cs = to_state(sd);
	
	gpiod_set_value_cansleep(cs->enable_gpio, 0);
	msleep(10);

	gpiod_set_value_cansleep(cs->reset_gpio, 1);
	msleep(15);

	//ret = write_regs_cm130pc20(sensor_reg_common_cm130pc20[0]);
	//I2C 확인 용
	//diff_read_regs_cm130pc20(sensor_reg_common_cm130pc20[0]);
	*/
	return 0;
}

static int sensor_cm130_subdev_close(struct v4l2_subdev *sd,
	struct v4l2_subdev_fh *fh)
{
	dprintk("%s()\n", __func__);
	/*
	struct cm130_state *cs = to_state(sd);
	
	gpiod_set_value_cansleep(cs->reset_gpio, 0);
	msleep(100);
	
	gpiod_set_value_cansleep(cs->enable_gpio, 1);
	msleep(10);
	*/
	return 0;
}

static int sensor_cm130_subdev_registered(struct v4l2_subdev *sd)
{
	dprintk("%s()\n", __func__);
	return 0;
}

static void sensor_cm130_subdev_unregistered(struct v4l2_subdev *sd)
{
	dprintk("%s()\n", __func__);
}

static int sensor_cm130_link_setup(struct media_entity *entity,
		const struct media_pad *local,
		const struct media_pad *remote, u32 flags)
{
	return 0;
}

static int sensor_cm130_s_fmt(struct v4l2_subdev *sd,
			struct v4l2_subdev_pad_config *cfg,
			struct v4l2_subdev_format *fmt)
{
	struct v4l2_mbus_framefmt *mf = &fmt->format;
	dprintk("%s() %dx%d (0x%x) \n", __func__, mf->width, mf->height, mf->code);
	return 0;
}

static int sensor_cm130_enum_fsize(struct v4l2_subdev *sd,
		struct v4l2_subdev_pad_config *cfg,
		struct v4l2_subdev_frame_size_enum *frame)
{
	dprintk("%s(): index = %d\n", __func__, frame->index);
	if (frame->index >= ARRAY_SIZE(supported_resolutions))
		return -ENODEV;

	frame->max_width = supported_resolutions[frame->index].width;
	frame->max_height = supported_resolutions[frame->index].height;
	dprintk("%s(): max_width = %d\n", __func__, frame->max_width);
	dprintk("%s(): max_height = %d\n", __func__, frame->max_height);
	/*
	if (frame->index >= ARRAY_SIZE(sensor_sizes_cm130pc20))
		return -ENODEV;

	frame->max_width = sensor_sizes_cm130pc20[frame->index].width;
	frame->max_height = sensor_sizes_cm130pc20[frame->index].height;
	*/
	return 0;
}

static int sensor_cm130_enum_finterval(struct v4l2_subdev *sd,
		struct v4l2_subdev_pad_config *cfg,
		struct v4l2_subdev_frame_interval_enum *frame)
{
	int i;

	dprintk("%s()\n", __func__);
	for (i = 0; i < ARRAY_SIZE(supported_resolutions); i++) {
		if ((frame->width == supported_resolutions[i].width) &&
		    (frame->height == supported_resolutions[i].height)) {
			frame->interval.numerator = 1;
			frame->interval.denominator =	supported_resolutions[i].interval[frame->index];
    	dprintk("%s(): [%d]th width = %d\n", __func__, i, frame->width);
    	dprintk("%s(): [%d]th height = %d\n", __func__, i, frame->height);
			return false;
		}
	}
	/*
	for (i = 0; i < ARRAY_SIZE(sensor_sizes_cm130pc20); i++) {
		if ((frame->width == sensor_sizes_cm130pc20[i].width) &&
		    (frame->height == sensor_sizes_cm130pc20[i].height)) {
			frame->interval.numerator = 1;
			frame->interval.denominator = CM130PC20_FRAMERATE;
			return false;
		}
	}
	*/
	return -EINVAL;
}

static int sensor_cm130_s_param(struct v4l2_subdev *sd,
	struct v4l2_streamparm *param)
{
	dprintk("%s()\n", __func__);
	return 0;
}
static struct v4l2_subdev_pad_ops pad_ops = {
	.set_fmt		= sensor_cm130_s_fmt,
	.enum_frame_size	= sensor_cm130_enum_fsize,
	.enum_frame_interval	= sensor_cm130_enum_finterval,
};

static const struct v4l2_subdev_core_ops core_ops = {
	.init		= sensor_cm130_init,
};

static const struct v4l2_subdev_video_ops video_ops = {
	.s_stream = sensor_cm130_s_stream,
	.s_parm = sensor_cm130_s_param,
};

static const struct v4l2_subdev_ops subdev_ops = {
	.core = &core_ops,
	.video = &video_ops,
	.pad	= &pad_ops,
};

static const struct v4l2_subdev_internal_ops internal_ops = {
	.open = sensor_cm130_subdev_open,
	.close = sensor_cm130_subdev_close,
	.registered = sensor_cm130_subdev_registered,
	.unregistered = sensor_cm130_subdev_unregistered,
};

static const struct media_entity_operations media_ops = {
	.link_setup = sensor_cm130_link_setup,
};

int sensor_cm130_probe(struct i2c_client *client,
	const struct i2c_device_id *id)
{
	dprintk("%s()\n", __func__);
	int ret, err = 0;
	struct v4l2_subdev *subdev_module;
	struct cm130_state *cm130_state;

	cm130_state = devm_kzalloc(&client->dev, sizeof(struct cm130_state),
		GFP_KERNEL);
	if (!cm130_state) {
		return -ENOMEM;
	}
	/*
	//get GPIO
	cm130_state->enable_gpio = devm_gpiod_get_optional(&client->dev, "enable", GPIOD_OUT_HIGH);
	if (IS_ERR(cm130_state->enable_gpio)) {
		err = PTR_ERR(cm130_state->enable_gpio);
		dev_err(&client->dev, "failed to request GPIO: %d\n", err);
		return err;
	}
	cm130_state->reset_gpio = devm_gpiod_get_optional(&client->dev, "reset", GPIOD_OUT_LOW);
	if (IS_ERR(cm130_state->reset_gpio)) {
		err = PTR_ERR(cm130_state->reset_gpio);
		dev_err(&client->dev, "failed to request GPIO: %d\n", err);
		return err;
	}
	cm130_state->door_gpio = devm_gpiod_get_optional(&client->dev, "door", GPIOD_OUT_HIGH);
	if (IS_ERR(cm130_state->door_gpio)) {
		err = PTR_ERR(cm130_state->door_gpio);
		dev_err(&client->dev, "failed to request GPIO: %d\n", err);
		return err;
	}
	*/
	
	subdev_module = &cm130_state->subdev;
	snprintf(subdev_module->name, V4L2_SUBDEV_NAME_SIZE,
		"%s", SENSOR_NAME);

	v4l2_i2c_subdev_init(subdev_module, client, &subdev_ops);

	cm130_state->pad.flags = MEDIA_PAD_FL_SOURCE;

	subdev_module->entity.type = MEDIA_ENT_T_V4L2_SUBDEV_SENSOR;
	subdev_module->flags = V4L2_SUBDEV_FL_HAS_DEVNODE;
	subdev_module->internal_ops = &internal_ops;
	subdev_module->entity.ops = &media_ops;

	ret = media_entity_init(&subdev_module->entity, 1,
		&cm130_state->pad, 0);
	if (ret < 0) {
		dev_err(&client->dev, "%s, failed\n", __func__);
		return ret;
	}

	cm130_state->client = client;

	dev_info(&client->dev, "(%d)\n", ret);
	return ret;
}

static int sensor_cm130_remove(struct i2c_client *client)
{
	int ret = 0;
	struct v4l2_subdev *subdev = i2c_get_clientdata(client);

	v4l2_device_unregister_subdev(subdev);
	media_entity_cleanup(&subdev->entity);

	return ret;
}

static const struct i2c_device_id sensor_cm130_idt[] = {
	{ SENSOR_NAME, 0 },
	{ }
};

static struct i2c_driver sensor_cm130_driver = {
	.driver = {
		.name	= SENSOR_NAME,
	},
	.probe	= sensor_cm130_probe,
	.remove	= sensor_cm130_remove,
	.id_table = sensor_cm130_idt
};

module_i2c_driver(sensor_cm130_driver);

MODULE_AUTHOR("Younghee Lee <yh202.lee@samsung.com>");
MODULE_DESCRIPTION("Sensor cm130 driver");
MODULE_LICENSE("GPL v2");
